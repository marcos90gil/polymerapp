<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">

<dom-module id="my-shop">
  <template>
    <style>
      :host {
        display: block;
      }

      span {
        @apply(--paper-font-body1);
      }

      .item-card-header { @apply(--paper-font-headline); }
      .item-card-light { color: var(--paper-grey-600); }
      .item-card-price {
        float: right;
        font-size: 15px;
        vertical-align: middle;
      }
      .item-card-reserve { color: var(--google-blue-500); }
      iron-icon.star {
        --iron-icon-width: 16px;
        --iron-icon-height: 16px;
        color: var(--paper-amber-500);
      }
      iron-icon.star:last-of-type { color: var(--paper-grey-500); }
    </style>

    <template is="dom-repeat" items="[[validItems]]">
      <paper-card image="[[item.image]]">
        <div class="card-content">
          <div class="item-card-header">[[item.title]]
            <div class="item-card-price item-card-light">
              <span>[[item.price]]$</span>
              <iron-icon icon="maps:local-offer"></iron-icon>
            </div>
          </div>
          <p class="item-card-light">[[item.body]]</p>
        </div>
        <div class="card-actions">
          <paper-button class="item-card-reserve">BUY</paper-button>
        </div>
      </paper-card>

    </template>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'my-shop',

        properties : {
          items : {
            type: Array,
          },
          validItems : {
            type: Array,
          },
          category : {
            type : String
          }
        },

        observers : ['whenCategory(category, items)'],
       
        ready : function () {

        },

        whenCategory : function (category, items) {
          console.log('Shop input', 'category', category, 'items', items);
          this.validItems = (items || []).filter (function (item) {
            return  item.category === category  || category === 'all';
          });
          console.log('Datasource output', this.validItems);
        }
      });
    })();
  </script>
</dom-module>
